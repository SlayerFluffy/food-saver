<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food Saver - Account</title>
    <script src="../js/main.js" type="module"></script>
    <script src="../js/account.js" type="module"></script>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <header id="main-header"></header>
    <main>
        <div class="account-container">
            <div id="auth-section">
                <!-- Login Form -->
                <div id="login-form" class="auth-form active">
                    <h2>Welcome Back!</h2>
                    <p>Sign in to access your pantry and cookbook</p>
                    
                    <form id="login-form-element" novalidate>
                        <div class="form-group">
                            <label for="login-email">Email Address</label>
                            <input 
                                type="email" 
                                id="login-email" 
                                name="email" 
                                required 
                                autocomplete="email"
                            >
                            <span class="error-message" id="login-email-error"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input 
                                type="password" 
                                id="login-password" 
                                name="password" 
                                required 
                                autocomplete="current-password"
                            >
                            <span class="error-message" id="login-password-error"></span>
                        </div>
                        
                        <button type="submit" class="btn">Sign In</button>
                        
                        <div class="form-switch">
                            <p>Don't have an account? <button type="button" id="show-register" class="btn">Create one</button></p>
                        </div>
                    </form>
                    
                    <!-- <div class="demo-account">
                        <p><strong>Demo Account:</strong></p>
                        <p>Email: demo@foodsaver.com</p>
                        <p>Password: demo123</p>
                        <button id="demo-login" class="btn">Use Demo Account</button>
                    </div> -->
                </div>

                <!-- Registration Form -->
                <div id="register-form" class="auth-form">
                    <h2>Create Account</h2>
                    <p>Join Food Saver to start managing your kitchen</p>
                    
                    <form id="register-form-element" novalidate>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="register-firstname">First Name</label>
                                <input 
                                    type="text" 
                                    id="register-firstname" 
                                    name="firstName" 
                                    required 
                                    autocomplete="given-name"
                                >
                                <span class="error-message" id="register-firstname-error"></span>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-lastname">Last Name</label>
                                <input 
                                    type="text" 
                                    id="register-lastname" 
                                    name="lastName" 
                                    required 
                                    autocomplete="family-name"
                                >
                                <span class="error-message" id="register-lastname-error"></span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-email">Email Address</label>
                            <input 
                                type="email" 
                                id="register-email" 
                                name="email" 
                                required 
                                autocomplete="email"
                            >
                            <span class="error-message" id="register-email-error"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-password">Password</label>
                            <input 
                                type="password" 
                                id="register-password" 
                                name="password" 
                                required 
                                autocomplete="new-password"
                                minlength="6"
                            >
                            <small>Password must be at least 6 characters long</small>
                            <span class="error-message" id="register-password-error"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-confirm-password">Confirm Password</label>
                            <input 
                                type="password" 
                                id="register-confirm-password" 
                                name="confirmPassword" 
                                required 
                                autocomplete="new-password"
                            >
                            <span class="error-message" id="register-confirm-password-error"></span>
                        </div>
                        
                        <button type="submit" class="btn">Create Account</button>
                        
                        <div class="form-switch">
                            <p>Already have an account? <button type="button" id="show-login" class="btn">Sign in</button></p>
                        </div>
                    </form>
                </div>
            </div>

            <!-- User Dashboard (shown when logged in) -->
            <div id="user-dashboard" class="hidden">
                <div class="dashboard-header">
                    <h2>Welcome, <span id="user-name"></span>!</h2>
                    <button id="logout-btn" class="btn">Sign Out</button>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3>My Pantry</h3>
                        <p class="stat-number" id="pantry-count">0</p>
                        <p>Ingredients</p>
                        <a href="/pantry/" class="btn">View Pantry</a>
                    </div>
                    
                    <div class="stat-card">
                        <h3>My Cookbook</h3>
                        <p class="stat-number" id="cookbook-count">0</p>
                        <p>Saved Recipes</p>
                        <a href="/cookbook/" class="btn">View Cookbook</a>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Quick Actions</h3>
                        <div class="quick-actions">
                            <a href="/search/" class="btn">Find Recipes</a>
                            <a href="/planner/" class="btn">Meal Planner</a>
                            <a href="/shopping-list/" class="btn">Shopping List</a>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3>Account Settings</h3>
                    <div class="profile-actions">
                        <button id="edit-profile-btn" class="btn">Edit Profile</button>
                        <button id="change-password-btn" class="btn">Change Password</button>
                    </div>
                </div>
            </div>

            <!-- Edit Profile Modal -->
            <div id="edit-profile-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Edit Profile</h3>
                        <button id="close-profile-modal" class="close-btn">&times;</button>
                    </div>
                    
                    <form id="edit-profile-form" class="modal-body">
                        <div class="form-group">
                            <label for="edit-firstname">First Name</label>
                            <input type="text" id="edit-firstname" name="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="edit-lastname">Last Name</label>
                            <input type="text" id="edit-lastname" name="lastName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="edit-email">Email Address</label>
                            <input type="email" id="edit-email" name="email" required>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" id="cancel-profile-edit" class="btn">Cancel</button>
                            <button type="submit" class="btn">Save Changes</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Change Password Modal -->
            <div id="change-password-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Change Password</h3>
                        <button id="close-password-modal" class="close-btn">&times;</button>
                    </div>
                    
                    <form id="change-password-form" class="modal-body">
                        <div class="form-group">
                            <label for="current-password">Current Password</label>
                            <input type="password" id="current-password" name="currentPassword" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">New Password</label>
                            <input type="password" id="new-password" name="newPassword" required minlength="6">
                            <small>Password must be at least 6 characters long</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-new-password">Confirm New Password</label>
                            <input type="password" id="confirm-new-password" name="confirmPassword" required>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" id="cancel-password-change" class="btn">Cancel</button>
                            <button type="submit" class="btn">Change Password</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Global Message Display -->
        <div id="message-container" class="message-container hidden">
            <div id="message-content" class="message">
                <span id="message-text"></span>
                <button id="message-close" class="message-close">&times;</button>
            </div>
        </div>
    </main>
    <footer id="main-footer"></footer>
</body>

</html>